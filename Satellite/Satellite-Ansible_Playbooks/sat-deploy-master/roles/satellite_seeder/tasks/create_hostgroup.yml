- name: 'Create RHEL hostgroup'
  shell: >
    {{ satellite_seeder_hammer }} hostgroup create
    --organizations '{{ satellite_seeder_organization }}'
    --locations '{{ satellite_seeder_location }}'
    --name 'RHEL 7 SOE'
    --architecture 'x86_64'
    --content-view 'RHEL 7 SOE'
    --content-source-id {{ satellite_seeder_smart_proxy.Id }}
    --lifecycle-environment 'Library'
    --root-pass 'changeme'
    --domain 'example.com'
    --subnet '{{ satellite_seeder_network }}/24'
    --environment production
    --operatingsystem-id {{ satellite_seeder_os.Id }}
    --puppet-ca-proxy-id {{ satellite_seeder_smart_proxy.Id }}
    --puppet-proxy-id {{ satellite_seeder_smart_proxy.Id }}
    --partition-table 'Kickstart default'
    --query-organization '{{ satellite_seeder_organization }}'
  when: "'not found' in satellite_seeder_hostgroup.stderr"
